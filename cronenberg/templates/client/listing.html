{% raw %}

<script id="ds-tmpl-dashboard-listing-entry" type="text/x-handlebars-template">
  <tr>
    <td>
      <div class="row">
        <div class=""> <!-- col-md-1 -->
          <!-- <a href="/dashboards/{{id}}"><i class="fa fa-2x fa-dashboard"></i></a> -->
        </div>
        <div class="col-md-12">
          <div class="pull-left">
            <a href="/dashboards/{{id}}">
              {{category}} /
              <strong>
                {{title}}
              </strong>
              {{#if description}}
              <br/>
              <small>{{description}}</small>
              {{/if}}
            </a><br/>
            Last modified {{last_modified}}.
          </div>

          <div class="pull-right" style="text-align:right">
            {{#each tags}}
            <a href="/dashboards/tagged/{{this}}"><span class="badge badge-primary">{{this}}</span></a>
            {{/each}}
            <br/>
            {{#if imported_from}}
            <a href="{{imported_from}}" target="_blank"><i class="fa fa-cloud"></i></a><br/>
            {{/if}}
          </div>
        </div>
      </div> <!-- row -->
    </td>
  </tr>
</script>

<script id="ds-tmpl-main-listing" type="text/x-handlebars-template">
  <table class="table table-hover table-condensed">
    <tbody>
      {{#each dashboards}}
      {{> dashboard-listing-entry}}
      {{else}}
      <tr><td><h3>No dashboards defined</h3></td></tr>
      {{/each}}
    </tbody>
  </table>
</script>

<script id="ds-tmpl-tag-listing" type="text/x-handlebars-template">
  <div class="list-group">
    <a class="list-group-item {{#unless tag}}active{{/unless}}" href="/dashboards">All <span class="badge badge-primary pull-right"></span></a>
    {{#each tags}}
    <a class="list-group-item " data-ds-tag="{{name}}" href="/dashboards/tagged/{{name}}">
      {{name}}
      <span class="badge badge-primary pull-right">{{count}}</span></a>
    {{/each}}
  </div>
</script>

<script>
  Handlebars.registerPartial('dashboard-listing-entry', $('#ds-tmpl-dashboard-listing-entry').html());
        cronenberg.templates.other = cronenberg.templates.other || {};
        cronenberg.templates.other.listing = Handlebars.compile($("#ds-tmpl-main-listing").html());
        cronenberg.templates.other.taglisting = Handlebars.compile($("#ds-tmpl-tag-listing").html());
</script>

{% endraw %}
